import React from "react";
import clsx from "clsx";
import { useThemeConfig } from "@docusaurus/theme-common";
import Logo from "@theme/Logo";
import CollapseButton from "@theme/DocSidebar/Desktop/CollapseButton";
import Content from "@theme/DocSidebar/Desktop/Content";
import styles from "./styles.module.css";
import NetworkSelect from "../../../components/NetworkSelect";
import usePageState from "../../../hooks/usePageState";

function DocSidebarDesktop({ path, sidebar, onCollapse, isHidden }) {
    const {
        navbar: { hideOnScroll },
        docs: {
            sidebar: { hideable },
        },
    } = useThemeConfig();
    const pageState = usePageState();

    return (
        <div
            className={clsx(
                styles.sidebar,
                hideOnScroll && styles.sidebarWithHideableNavbar,
                isHidden && styles.sidebarHidden,
                pageState?.path
            )}
        >
            {hideOnScroll && <Logo tabIndex={-1} className={styles.sidebarLogo} />}
            <NetworkSelect />
            <Content path={path} sidebar={sidebar} />
            {hideable && <CollapseButton onClick={onCollapse} />}
        </div>
    );
}
export default React.memo(DocSidebarDesktop);
